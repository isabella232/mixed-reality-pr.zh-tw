---
title: 將 HoloLens (第1代) 應用程式移植到 HoloLens 2
description: 適用對象為擁有可在 HoloLens (第一代) 和較舊 MRTK 版本上運作的現有應用程式，並想要移植到 MRTK 第 2 版和 HoloLens 2 的開發人員。
author: hferrone
ms.author: grbury
ms.date: 12/9/2020
ms.topic: article
ms.localizationpriority: high
keywords: Windows Mixed Reality, 測試, MRTK, MRTK 第 2 版, HoloLens 2, unity, 移植, HoloLens (第 1 代), 混合實境頭戴式裝置, windows 混合實境頭戴式裝置, 虛擬實境頭戴式裝置, 移轉, 最佳做法, ARM
ms.openlocfilehash: 7789e9207f3c4fec7a0bbd6a824a4ae48a5741cd
ms.sourcegitcommit: 9ae76b339968f035c703d9c1fe57ddecb33198e3
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 05/27/2021
ms.locfileid: "110600537"
---
# <a name="porting-hololens-1st-gen-apps-to-hololens-2"></a><span data-ttu-id="eb964-104">將 HoloLens (第1代) 應用程式移植到 HoloLens 2</span><span class="sxs-lookup"><span data-stu-id="eb964-104">Porting HoloLens (1st Gen) apps to HoloLens 2</span></span>

<span data-ttu-id="eb964-105">本指南的宗旨是要協助開發人員將現有的 HoloLens (第 1 代) Unity 應用程式移植到 HoloLens 2 裝置使用。</span><span class="sxs-lookup"><span data-stu-id="eb964-105">This guide is tailored to help developers with an existing Unity application for HoloLens (1st gen) port their application for the HoloLens 2 device.</span></span> <span data-ttu-id="eb964-106">將 HoloLens (第 1 代) Unity 應用程式移植到 HoloLens 2 的作業有四個重要步驟。</span><span class="sxs-lookup"><span data-stu-id="eb964-106">There are four key steps to porting a HoloLens (1st gen) Unity application to HoloLens 2.</span></span> 

<span data-ttu-id="eb964-107">下列各節將詳細說明每個階段的資訊：</span><span class="sxs-lookup"><span data-stu-id="eb964-107">The sections below detail information for each stage:</span></span>

| <span data-ttu-id="eb964-108">步驟 1</span><span class="sxs-lookup"><span data-stu-id="eb964-108">Step 1</span></span> | <span data-ttu-id="eb964-109">步驟 2</span><span class="sxs-lookup"><span data-stu-id="eb964-109">Step 2</span></span> | <span data-ttu-id="eb964-110">步驟 3</span><span class="sxs-lookup"><span data-stu-id="eb964-110">Step 3</span></span> | <span data-ttu-id="eb964-111">步驟 4</span><span class="sxs-lookup"><span data-stu-id="eb964-111">Step 4</span></span> |
|----------|-------------------|-------------------|-------------------|
| ![Visual Studio 標誌](../images/visualstudio_logo.png) | ![Unity 標誌](../../design/images/logo-unity.png)| ![Unity 圖示](../unity/images/hololens2_icon.jpg) | ![MRTK 標誌](../../design/images/74-12.png) |
| <span data-ttu-id="eb964-116">下載最新工具</span><span class="sxs-lookup"><span data-stu-id="eb964-116">Download latest tools</span></span> | <span data-ttu-id="eb964-117">更新 Unity 專案</span><span class="sxs-lookup"><span data-stu-id="eb964-117">Update Unity Project</span></span> | <span data-ttu-id="eb964-118">針對 ARM 進行編譯</span><span class="sxs-lookup"><span data-stu-id="eb964-118">Compile for ARM</span></span> | <span data-ttu-id="eb964-119">遷移至 MRTK v2</span><span class="sxs-lookup"><span data-stu-id="eb964-119">Migrate to MRTK v2</span></span>

## <a name="prerequisites"></a><span data-ttu-id="eb964-120">必要條件</span><span class="sxs-lookup"><span data-stu-id="eb964-120">Prerequisites</span></span>

<span data-ttu-id="eb964-121">**強烈建議** 在開始移植程序之前，先利用原始檔控制來儲存您應用程式原始狀態的快照集。</span><span class="sxs-lookup"><span data-stu-id="eb964-121">We **highly recommended** using source control to save a snapshot your applications original state before starting the porting process.</span></span> <span data-ttu-id="eb964-122">此外，也建議在移植程序進行期間於不同時間「儲存」檢查點狀態。</span><span class="sxs-lookup"><span data-stu-id="eb964-122">Additionally, we recommend *saving* checkpoint states at various times during the process.</span></span> <span data-ttu-id="eb964-123">為原始應用程式準備另一個 Unity 執行個體以便在移植程序進行期間兩相比較，也很有幫助。</span><span class="sxs-lookup"><span data-stu-id="eb964-123">It can also be helpful to have another Unity instance of the original application to compare side by side during the porting process.</span></span> 

> [!NOTE]
> <span data-ttu-id="eb964-124">在移植之前，請確定您已安裝可用於開發 Windows Mixed Reality 的最新工具。</span><span class="sxs-lookup"><span data-stu-id="eb964-124">Before porting, ensure you have the latest tools installed for Windows Mixed Reality development.</span></span> <span data-ttu-id="eb964-125">對大部分現有的 HoloLens 開發人員來說，這涉及更新至最新版的 Visual Studio 2019，以及安裝適當的 Windows SDK。</span><span class="sxs-lookup"><span data-stu-id="eb964-125">For most existing HoloLens developers, this involves updating to the latest version of Visual Studio 2019 and installing the appropriate Windows SDK.</span></span> <span data-ttu-id="eb964-126">以下內容將進一步說明不同的 Unity 版本和混合實境工具組 (MRTK) 第 2 版。</span><span class="sxs-lookup"><span data-stu-id="eb964-126">The content that follows dives further into different Unity versions and the Mixed Reality Toolkit (MRTK) Version 2.</span></span>
>
> <span data-ttu-id="eb964-127">如需詳細資訊，請參閱[安裝工具](../install-the-tools.md)。</span><span class="sxs-lookup"><span data-stu-id="eb964-127">For more information, please see [Install the tools](../install-the-tools.md).</span></span>

## <a name="migrate-project-to-the-latest-version-of-unity"></a><span data-ttu-id="eb964-128">將專案遷移至最新版的 Unity</span><span class="sxs-lookup"><span data-stu-id="eb964-128">Migrate project to the latest version of Unity</span></span>

<span data-ttu-id="eb964-129">如果您使用 [MRTK v2](https://github.com/microsoft/MixedRealityToolkit-Unity)，則 [Unity 2019 LTS](https://unity3d.com/unity/qa/lts-releases) 會是最佳的長期支援途徑，因為 Unity 或 MRTK 沒有重大變更。</span><span class="sxs-lookup"><span data-stu-id="eb964-129">If you're using [MRTK v2](https://github.com/microsoft/MixedRealityToolkit-Unity), [Unity 2019 LTS](https://unity3d.com/unity/qa/lts-releases) is the best long-term support path with no breaking changes in Unity or in MRTK.</span></span> <span data-ttu-id="eb964-130">評估任何目前存在於您專案中的[外掛程式相依性](https://docs.unity3d.com/Manual/Plugins.html)，並決定是否可針對 ARM64 建置這些 DLL。</span><span class="sxs-lookup"><span data-stu-id="eb964-130">Assess any [plugin dependencies](https://docs.unity3d.com/Manual/Plugins.html) that currently exist in your project, and determine whether these DLLs can be built for ARM64.</span></span> <span data-ttu-id="eb964-131">針對具有硬性 ARM64 相依外掛程式的專案，您可能需要繼續針對 ARM 建置您的應用程式。</span><span class="sxs-lookup"><span data-stu-id="eb964-131">For projects with a hard ARM64 dependent plugin, you may need to continue building your app for ARM.</span></span>

<!-- MRTK v2 always guarantees support for Unity 2018 LTS, but does not necessarily guarantee support for every iteration of Unity 2019.x.

To help clarify additional differences between [Unity 2018 LTS](https://unity3d.com/unity/qa/lts-releases) and Unity 2019.x, the following table outlines the trade-offs between the two versions. The primary difference between the two is the ability to compile for ARM64 in Unity 2019.

| Unity 2018 LTS | Unity 2019.x |
|----------|-------------------|
| ARM32 build support | ARM32 and ARM64 build support |
| Stable LTS build release | Beta stability |
| [.NET Scripting back-end](https://docs.unity3d.com/2018.4/Documentation/Manual/windowsstore-dotnet.html) *deprecated* | [.NET Scripting back-end](https://docs.unity3d.com/2018.4/Documentation/Manual/windowsstore-dotnet.html) *removed* |
| UNET Networking *deprecated* | UNET Networking *deprecated* |

-->

## <a name="update-sceneproject-settings-in-unity"></a><span data-ttu-id="eb964-132">更新 Unity 中的場景/專案設定</span><span class="sxs-lookup"><span data-stu-id="eb964-132">Update scene/project settings in Unity</span></span>

<span data-ttu-id="eb964-133">在更新至 [Unity 2019 LTS](https://unity3d.com/unity/qa/lts-releases) 之後，建議您更新 Unity 中的特殊設定，以便在裝置上獲得最佳結果。</span><span class="sxs-lookup"><span data-stu-id="eb964-133">After updating to [Unity 2019 LTS](https://unity3d.com/unity/qa/lts-releases), it's recommended that you update particular settings in Unity for optimal results on the device.</span></span> <span data-ttu-id="eb964-134">[Unity 的建議設定](../unity/Recommended-settings-for-Unity.md)底下會詳述這些設定。</span><span class="sxs-lookup"><span data-stu-id="eb964-134">These settings are outlined in detail under [recommended settings for Unity](../unity/Recommended-settings-for-Unity.md).</span></span>

<span data-ttu-id="eb964-135">再次重申，[.NET 指令碼處理後端](https://docs.unity3d.com/Manual/windowsstore-dotnet.html)在 Unity 2018 中即將過時，且在 Unity 2019 中「已移除」。</span><span class="sxs-lookup"><span data-stu-id="eb964-135">To reiterate, the [.NET scripting back-end](https://docs.unity3d.com/Manual/windowsstore-dotnet.html) is being deprecated in Unity 2018 and **removed** in Unity 2019.</span></span> <span data-ttu-id="eb964-136">開發人員應積極考慮將其專案轉換至 [IL2CPP](https://docs.unity3d.com/Manual/IL2CPP.html)。</span><span class="sxs-lookup"><span data-stu-id="eb964-136">Developers should strongly consider switching their project to [IL2CPP](https://docs.unity3d.com/Manual/IL2CPP.html).</span></span>

> [!NOTE]
> <span data-ttu-id="eb964-137">IL2CPP 指令碼處理後端會讓從 Unity 到 Visual Studio 的建置時間變長，開發人員應設定其開發人員機器，以[最佳化 IL2CPP 建置時間](https://docs.unity3d.com/Manual/IL2CPP-OptimizingBuildTimes.html)。</span><span class="sxs-lookup"><span data-stu-id="eb964-137">IL2CPP scripting back-end can cause longer build times from Unity to Visual Studio, and developers should set up their developer machine for [optimizing IL2CPP build times](https://docs.unity3d.com/Manual/IL2CPP-OptimizingBuildTimes.html).</span></span>
> <span data-ttu-id="eb964-138">設定[快取伺服器](https://docs.unity3d.com/Manual/CacheServer.html)也可能會有幫助，對於有大量資產 (排除指令檔) 或不斷變更場景和資產的 Unity 專案來說，更是如此。</span><span class="sxs-lookup"><span data-stu-id="eb964-138">It might also be beneficial to set up a [cache server](https://docs.unity3d.com/Manual/CacheServer.html), especially for Unity projects with a large amount of assets (excluding script files) or constantly changing scenes and assets.</span></span> <span data-ttu-id="eb964-139">開啟專案時，Unity 會將符合資格的資產以內部快取格式儲存在開發機器上。</span><span class="sxs-lookup"><span data-stu-id="eb964-139">When opening a project, Unity stores qualifying assets into an internal cache format on the developer machine.</span></span> <span data-ttu-id="eb964-140">項目必須重新匯入，且在修改後必須重新處理。</span><span class="sxs-lookup"><span data-stu-id="eb964-140">Items must be re-imported and re-processed when modified.</span></span> <span data-ttu-id="eb964-141">此程序可以執行一次後就儲存在快取伺服器中，之後再與其他開發人員共用以節省時間，而不是每個開發人員都在本機處理新變更的重新匯入工作。</span><span class="sxs-lookup"><span data-stu-id="eb964-141">This process can be done once and saved in a cache server and consequently shared with other developers to save time, as opposed to every developer processing the re-import of new changes locally.</span></span>

<span data-ttu-id="eb964-142">解決移至已更新 Unity 版本中的任何重大變更之後，在 HoloLens (第一代) 上建置並測試您目前的應用程式。</span><span class="sxs-lookup"><span data-stu-id="eb964-142">After addressing any breaking changes from moving to the updated Unity version, build and test your current applications on HoloLens (1st gen).</span></span> <span data-ttu-id="eb964-143">這是建立認可並儲存至原始檔控制的好時機。</span><span class="sxs-lookup"><span data-stu-id="eb964-143">This is a good time to create and save a commit into source control.</span></span>

## <a name="compile-dependenciesplugins-for-arm-processor"></a><span data-ttu-id="eb964-144">針對 ARM 處理器編譯相依性/外掛程式</span><span class="sxs-lookup"><span data-stu-id="eb964-144">Compile dependencies/plugins for ARM processor</span></span>

<span data-ttu-id="eb964-145">HoloLens (第 1 代) 會在 x86 處理器上執行應用程式，HoloLens 2 則會使用 ARM 處理器。</span><span class="sxs-lookup"><span data-stu-id="eb964-145">HoloLens (1st gen) executes applications on an x86 processor while the HoloLens 2 uses an ARM processor.</span></span> <span data-ttu-id="eb964-146">現有的 HoloLens 應用程式必須移植過去才能支援 ARM。</span><span class="sxs-lookup"><span data-stu-id="eb964-146">Existing HoloLens applications need to be ported over to support ARM.</span></span> <span data-ttu-id="eb964-147">如前所述，Unity 2018 LTS 支援編譯 ARM32 的應用程式，而 Unity 2019.x 則支援編譯 ARM32 和 ARM64 的應用程式。</span><span class="sxs-lookup"><span data-stu-id="eb964-147">As noted earlier, Unity 2018 LTS supports compiling ARM32 apps while Unity 2019.x supports compiling ARM32 and ARM64 apps.</span></span> <span data-ttu-id="eb964-148">偏好開發 ARM64 應用程式，因為效能差異極大。</span><span class="sxs-lookup"><span data-stu-id="eb964-148">Developing for ARM64 applications is preferred, as there's a material difference in performance.</span></span> <span data-ttu-id="eb964-149">但要這麼做，所有的[外掛程式相依性](https://docs.unity3d.com/Manual/Plugins.html)也必須針對 ARM64 來建置。</span><span class="sxs-lookup"><span data-stu-id="eb964-149">However, this requires all [plugin dependencies](https://docs.unity3d.com/Manual/Plugins.html) to also be built for ARM64.</span></span>

<span data-ttu-id="eb964-150">請檢閱您的應用程式中所有的 DLL 相依性。</span><span class="sxs-lookup"><span data-stu-id="eb964-150">Review all DLL dependencies in your application.</span></span> <span data-ttu-id="eb964-151">建議移除專案不再需要的相依性。</span><span class="sxs-lookup"><span data-stu-id="eb964-151">We recommend removing dependencies that are no longer needed for your project.</span></span> <span data-ttu-id="eb964-152">至於其餘的必要外掛程式，則請將個別的 ARM32 或 ARM64 二進位檔案嵌入至您的 Unity 專案中。</span><span class="sxs-lookup"><span data-stu-id="eb964-152">For remaining plugins that are required, ingest the respective ARM32 or ARM64 binaries into your Unity project.</span></span>

<span data-ttu-id="eb964-153">嵌入相關的 DLL 之後，請從 Unity 建置 Visual Studio 解決方案，在 Visual Studio 中針對 ARM 進行編譯 AppX，以測試是否可針對 ARM 處理器建置您的應用程式。</span><span class="sxs-lookup"><span data-stu-id="eb964-153">After ingesting the relevant DLLs, build a Visual Studio solution from Unity and compile an AppX for ARM in Visual Studio to test your application can be built for ARM processors.</span></span> <span data-ttu-id="eb964-154">建議您在原始檔控制解決方案中將應用程式儲存為認可。</span><span class="sxs-lookup"><span data-stu-id="eb964-154">It's advised to save the application as a commit in your source control solution.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="eb964-155">將建置目標變更為 ARM 之後，使用 MRTK v1 的應用程式可以在 HoloLens 2 上執行，前提是已符合所有其他需求。</span><span class="sxs-lookup"><span data-stu-id="eb964-155">Application's using MRTK v1 can be run on HoloLens 2 after changing the build target to ARM, assuming that all other requirements are met.</span></span> <span data-ttu-id="eb964-156">這包括確定您具有所有外掛程式的 ARM 版本。</span><span class="sxs-lookup"><span data-stu-id="eb964-156">This includes making sure you have ARM versions of all your plugins.</span></span> <span data-ttu-id="eb964-157">不過，您的應用程式將無法存取 HoloLens 2 特有功能，例如以關節連接的手部和眼球追蹤。</span><span class="sxs-lookup"><span data-stu-id="eb964-157">However, your app won't have access to HoloLens 2 specific functions like articulated hand and eye tracking.</span></span> <span data-ttu-id="eb964-158">MRTK v1 和 MRTK v2 有不同的命名空間，可讓兩個版本位於相同專案中，這對於不同版本的轉換很有幫助。</span><span class="sxs-lookup"><span data-stu-id="eb964-158">MRTK v1 and MRTK v2 have different namespaces that allow both versions to be in the same project, which is useful for transitioning from one to the other.</span></span>

## <a name="update-to-mrtk-version-2"></a><span data-ttu-id="eb964-159">更新至 MRTK 第 2 版</span><span class="sxs-lookup"><span data-stu-id="eb964-159">Update to MRTK version 2</span></span>

<span data-ttu-id="eb964-160">[MRTK 第 2 版](https://github.com/microsoft/MixedRealityToolkit-Unity) 是 Unity 上的新工具組，支援 HoloLens (第1代) 和 HoloLens 2。</span><span class="sxs-lookup"><span data-stu-id="eb964-160">[MRTK Version 2](https://github.com/microsoft/MixedRealityToolkit-Unity) is the new toolkit on top of Unity that supports both HoloLens (1st gen) and HoloLens 2.</span></span> <span data-ttu-id="eb964-161">其也是 HoloLens 2 所有新增功能的所在位置，例如手動互動和眼球追蹤。</span><span class="sxs-lookup"><span data-stu-id="eb964-161">It's also where all the new HoloLens 2 capabilities have been added, such as hand interactions and eye tracking.</span></span>

<span data-ttu-id="eb964-162">如需使用 MRTK 第 2 版的詳細資訊，請查看下列資源：</span><span class="sxs-lookup"><span data-stu-id="eb964-162">Check out the following resources for more information on using MRTK version 2:</span></span>

- [<span data-ttu-id="eb964-163">MRTK-檔首頁</span><span class="sxs-lookup"><span data-stu-id="eb964-163">MRTK - Documentation home</span></span>](/windows/mixed-reality/mrtk-unity)
- [<span data-ttu-id="eb964-164">安裝指南</span><span class="sxs-lookup"><span data-stu-id="eb964-164">Installation guide</span></span>](/windows/mixed-reality/mrtk-unity/install-the-tools)
- [<span data-ttu-id="eb964-165">MRTK-手追蹤</span><span class="sxs-lookup"><span data-stu-id="eb964-165">MRTK - Hand tracking</span></span>](/windows/mixed-reality/mrtk-unity/features/input/hand-tracking)
- [<span data-ttu-id="eb964-166">MRTK-眼睛追蹤</span><span class="sxs-lookup"><span data-stu-id="eb964-166">MRTK - Eye tracking</span></span>](/windows/mixed-reality/mrtk-unity/features/input/eye-tracking/eye-tracking-main)

### <a name="prepare-for-the-migration"></a><span data-ttu-id="eb964-167">準備移轉</span><span class="sxs-lookup"><span data-stu-id="eb964-167">Prepare for the migration</span></span>

<span data-ttu-id="eb964-168">在嵌入新的 [\*.unitypackage 檔案 (適用於 MRTK v2)](https://github.com/Microsoft/MixedRealityToolkit-Unity/releases) 之前，建議您清查 **1) 與 MRTK v1 整合的任何自訂建置程式碼** 和 **2) 用於輸入互動或 UX 元件的任何自訂建置程式碼**。</span><span class="sxs-lookup"><span data-stu-id="eb964-168">Before ingesting the new [\*.unitypackage files for MRTK v2](https://github.com/Microsoft/MixedRealityToolkit-Unity/releases), it's recommended to take an inventory of **1) any custom-built code that integrates with MRTK v1** and **2) any custom-built code for input interactions or UX components**.</span></span> <span data-ttu-id="eb964-169">內嵌 MRTK v2 的混合實境開發人員會在輸入和互動方面遇到最常見也最普遍的衝突。</span><span class="sxs-lookup"><span data-stu-id="eb964-169">The most common and prevalent conflict for a mixed reality developer ingesting MRTK v2 involves input and interactions.</span></span> <span data-ttu-id="eb964-170">建議您開始閱讀並了解 [MRTK v2 輸入模型](/windows/mixed-reality/mrtk-unity/features/input/overview)。</span><span class="sxs-lookup"><span data-stu-id="eb964-170">It's advised to begin reading and understanding the [MRTK v2 input model](/windows/mixed-reality/mrtk-unity/features/input/overview).</span></span>

<span data-ttu-id="eb964-171">終於，新的 [MRTK v2](https://github.com/microsoft/MixedRealityToolkit-Unity) 已從指令碼和場景中管理員物件的模型轉換為設定和服務提供者架構。</span><span class="sxs-lookup"><span data-stu-id="eb964-171">Finally, the new [MRTK v2](https://github.com/microsoft/MixedRealityToolkit-Unity) has transitioned from a model of scripts and in-scene manager objects to a configuration and services provider architecture.</span></span> <span data-ttu-id="eb964-172">這會讓場景階層和架構模型更為簡潔，但需要花一段時間學習才能了解新的組態設定檔。</span><span class="sxs-lookup"><span data-stu-id="eb964-172">This results in a cleaner scene hierarchy and architecture model, but requires a learning curve for understanding the new configuration profiles.</span></span> <span data-ttu-id="eb964-173">請閱讀[混合實境工具組設定指南](/windows/mixed-reality/mrtk-unity/configuration/mixed-reality-configuration-guide)來開始熟悉重要設定和設定檔，以調整為符合應用程式的需求。</span><span class="sxs-lookup"><span data-stu-id="eb964-173">Read the [Mixed Reality Toolkit Configuration Guide](/windows/mixed-reality/mrtk-unity/configuration/mixed-reality-configuration-guide) to start becoming familiar with the important settings and profiles to adjust to the needs of your application.</span></span>

### <a name="migrating-the-project"></a><span data-ttu-id="eb964-174">遷移專案</span><span class="sxs-lookup"><span data-stu-id="eb964-174">Migrating the project</span></span>

<span data-ttu-id="eb964-175">匯入 [MRTK v2](https://github.com/microsoft/MixedRealityToolkit-Unity) 之後，Unity 專案很可能會有許多編譯器相關錯誤。</span><span class="sxs-lookup"><span data-stu-id="eb964-175">After importing [MRTK v2](https://github.com/microsoft/MixedRealityToolkit-Unity), your Unity project most likely has many compiler-related errors.</span></span> <span data-ttu-id="eb964-176">之所以有這些錯誤，通常是因為使用了新的命名空間結構和新的元件名稱。</span><span class="sxs-lookup"><span data-stu-id="eb964-176">These are commonly because of the new namespace structure and new component names.</span></span> <span data-ttu-id="eb964-177">請繼續藉由將指令碼修改為新的命名空間和元件，來解決這些錯誤。</span><span class="sxs-lookup"><span data-stu-id="eb964-177">continue to resolve these errors by modifying your scripts to the new namespaces and components.</span></span>

<span data-ttu-id="eb964-178">如需 HTK/MRTK 和 MRTK 第 2 版之間特定 API 差異的詳細資訊，請參閱 [MRTK 第 2 版 Wiki](/windows/mixed-reality/mrtk-unity/updates-deployment/htk-to-mrtk-porting-guide) 上的移植指南。</span><span class="sxs-lookup"><span data-stu-id="eb964-178">For information on the specific API differences between HTK/MRTK and MRTK v2, see the porting guide on the [MRTK Version 2 wiki](/windows/mixed-reality/mrtk-unity/updates-deployment/htk-to-mrtk-porting-guide).</span></span>

### <a name="best-practices"></a><span data-ttu-id="eb964-179">最佳作法</span><span class="sxs-lookup"><span data-stu-id="eb964-179">Best practices</span></span>

- <span data-ttu-id="eb964-180">最好使用 [MRTK 標準著色器](/windows/mixed-reality/mrtk-unity/features/rendering/mrtk-standard-shader)。</span><span class="sxs-lookup"><span data-stu-id="eb964-180">Prefer use of the [MRTK standard shader](/windows/mixed-reality/mrtk-unity/features/rendering/mrtk-standard-shader).</span></span>
- <span data-ttu-id="eb964-181">一次處理一個重大變更類型 (例如：IFocusable to [IMixedRealityFocusHandler](/dotnet/api/microsoft.mixedreality.toolkit.input.imixedrealityfocushandler))。</span><span class="sxs-lookup"><span data-stu-id="eb964-181">Work on one breaking change type at a time (ex: IFocusable to [IMixedRealityFocusHandler](/dotnet/api/microsoft.mixedreality.toolkit.input.imixedrealityfocushandler)).</span></span>
- <span data-ttu-id="eb964-182">每次變更後都進行測試，並使用原始檔控制。</span><span class="sxs-lookup"><span data-stu-id="eb964-182">Test after every change and use source control.</span></span>
- <span data-ttu-id="eb964-183">盡可能使用預設的 MRTK UX (按鈕、靜態圖像等)。</span><span class="sxs-lookup"><span data-stu-id="eb964-183">Use default MRTK UX (buttons, slates, and so on), when possible.</span></span>
- <span data-ttu-id="eb964-184">避免直接修改 MRTK 檔案；請建立 MRTK 元件的包裝函式。</span><span class="sxs-lookup"><span data-stu-id="eb964-184">Refrain from modifying MRTK files directly; create wrappers around MRTK components.</span></span>
  - <span data-ttu-id="eb964-185">這個動作能簡化未來的 MRTK 內嵌和更新。</span><span class="sxs-lookup"><span data-stu-id="eb964-185">This action eases future MRTK ingestion and updates.</span></span>
- <span data-ttu-id="eb964-186">檢閱和探索 MRTK 中提供的場景範例，尤其是 HandInteractionExamples.scene。</span><span class="sxs-lookup"><span data-stu-id="eb964-186">Review and explore sample scenes provided in the MRTK, especially *HandInteractionExamples.scene*.</span></span>
- <span data-ttu-id="eb964-187">重建有四色、collider 和 TextMeshPro 文字的畫布式 UI。</span><span class="sxs-lookup"><span data-stu-id="eb964-187">Rebuild canvas-based UI with quads, colliders, and TextMeshPro text.</span></span>
- <span data-ttu-id="eb964-188">啟用[深度緩衝區共用](../unity/camera-in-unity.md#sharing-depth-buffers)或[設定焦點點](../unity/focus-point-in-unity.md)；最好使用 16 位元深度緩衝區以提升效能。</span><span class="sxs-lookup"><span data-stu-id="eb964-188">Enable [Depth Buffer Sharing](../unity/camera-in-unity.md#sharing-depth-buffers) or [set focus point](../unity/focus-point-in-unity.md); prefer to use a 16-bit depth buffer for better performance.</span></span> <span data-ttu-id="eb964-189">在轉譯色彩時，請務必同時轉譯深度。</span><span class="sxs-lookup"><span data-stu-id="eb964-189">Ensure when rendering color, to also render depth.</span></span> <span data-ttu-id="eb964-190">對於透明和文字 gameobject，Unity 通常不會寫入深度。</span><span class="sxs-lookup"><span data-stu-id="eb964-190">Unity generally doesn't write depth for transparent and text gameobjects.</span></span>
- <span data-ttu-id="eb964-191">設定單一階段執行個體化轉譯路徑。</span><span class="sxs-lookup"><span data-stu-id="eb964-191">Set Single Pass Instanced Rendering Path.</span></span>
- <span data-ttu-id="eb964-192">使用 [Hololens 2 的 MRTK 組態設定檔](/windows/mixed-reality/mrtk-unity/features/profiles/profiles#hololens-2-profile)</span><span class="sxs-lookup"><span data-stu-id="eb964-192">Use the [HoloLens 2 configuration profile for MRTK](/windows/mixed-reality/mrtk-unity/features/profiles/profiles#hololens-2-profile)</span></span>

### <a name="testing-your-application"></a><span data-ttu-id="eb964-193">測試您的應用程式</span><span class="sxs-lookup"><span data-stu-id="eb964-193">Testing your application</span></span>

<span data-ttu-id="eb964-194">在 MRTK 第 2 版中，您可以直接在 Unity 中模擬手部互動，並對新的 API 開發手部互動和眼球追蹤。</span><span class="sxs-lookup"><span data-stu-id="eb964-194">In MRTK Version 2, you can simulate hand interactions directly in Unity and develop with the new APIs for hand interactions and eye tracking.</span></span> <span data-ttu-id="eb964-195">必須要有 HoloLens 2 裝置，才能建立令人滿意的使用者體驗。</span><span class="sxs-lookup"><span data-stu-id="eb964-195">The HoloLens 2 device is required to create a satisfying user experience.</span></span> <span data-ttu-id="eb964-196">建議您開始研究相關文件和工具以進一步了解。</span><span class="sxs-lookup"><span data-stu-id="eb964-196">You're encouraged to start studying the documentation and tools for greater understanding.</span></span> <span data-ttu-id="eb964-197">[MRTK v2](https://github.com/microsoft/MixedRealityToolkit-Unity) 支援在 HoloLens (第 1 代) 上進行開發，且傳統的輸入模型 (例如，透過空中點選來進行選取) 仍可在 HoloLens (第 1 代) 裝置上進行測試。</span><span class="sxs-lookup"><span data-stu-id="eb964-197">[MRTK v2](https://github.com/microsoft/MixedRealityToolkit-Unity) supports development on HoloLens (1st gen) and traditional input models, such as select via air-tap can be tested on HoloLens (1st gen).</span></span> 

## <a name="updating-your-interaction-model-for-hololens-2"></a><span data-ttu-id="eb964-198">更新 HoloLens 2 的互動模型</span><span class="sxs-lookup"><span data-stu-id="eb964-198">Updating your interaction model for HoloLens 2</span></span>

> [!CAUTION]
> <span data-ttu-id="eb964-199">如果您的專案使用任何 XR.WSA API，在未來的 Unity 版本中，這些 API 將會取代為 Unity 的新 XR 輸入 API。</span><span class="sxs-lookup"><span data-stu-id="eb964-199">If your project is using any of the XR.WSA APIs, these are being phased out in favor of Unity's new XR input APIs in future Unity releases.</span></span> <span data-ttu-id="eb964-200">您可以在[這裡](https://docs.unity3d.com/Manual/xr_input.html)找到更多關於 XR 輸入 API 的資訊。</span><span class="sxs-lookup"><span data-stu-id="eb964-200">You can find more information about the [XR input APIs here](https://docs.unity3d.com/Manual/xr_input.html).</span></span>

<span data-ttu-id="eb964-201">移植應用程式並讓其做好使用 HoloLens 2 的準備之後，您就可以開始考慮更新互動模型和全像投影設計/位置。</span><span class="sxs-lookup"><span data-stu-id="eb964-201">Once your application is ported and prepped for HoloLens 2, you're ready to consider updating your interaction model and hologram design placements.</span></span>
<span data-ttu-id="eb964-202">在 HoloLens (第 1 代) 中，應用程式的注視並認可互動模型所使用的全像投影可能太遠而無法融入視野。</span><span class="sxs-lookup"><span data-stu-id="eb964-202">In HoloLens (1st gen), your application likely has a gaze and commit interaction model with holograms relatively far away to fit into the field of view.</span></span>

<span data-ttu-id="eb964-203">下列步驟可更新您的應用程式設計，使其適用於 HoloLens 2：</span><span class="sxs-lookup"><span data-stu-id="eb964-203">Steps to update your application design to be best suited for HoloLens 2:</span></span>
1.  <span data-ttu-id="eb964-204">MRTK 元件：根據事前工作，如果您已新增 [MRTK v2](https://github.com/microsoft/MixedRealityToolkit-Unity)，則其中會有各種已針對 HoloLens 2 來設計及最佳化的元件/指令碼可供運用。</span><span class="sxs-lookup"><span data-stu-id="eb964-204">MRTK components: Per the pre-work, if you added [MRTK v2](https://github.com/microsoft/MixedRealityToolkit-Unity), there are various components/scripts to leverage that have been designed and optimized for HoloLens 2.</span></span>

2.  <span data-ttu-id="eb964-205">互動模型：請考慮更新互動模型。</span><span class="sxs-lookup"><span data-stu-id="eb964-205">Interaction model: Consider updating your interaction model.</span></span> <span data-ttu-id="eb964-206">大部分情況下，建議您從注視和認可切換至手部。</span><span class="sxs-lookup"><span data-stu-id="eb964-206">For most scenarios, we recommend switching from gaze and commit to hands.</span></span> <span data-ttu-id="eb964-207">一般來說，全像投影會在比手臂可及範圍還遠的地方，因此切換為手部會讓互動指標光線和抓取手勢變遠。</span><span class="sxs-lookup"><span data-stu-id="eb964-207">With your holograms typically being out of arms-reach, switching to hands results in far interaction pointing rays and grab gestures.</span></span>

3.  <span data-ttu-id="eb964-208">全像投影位置：切換到手部互動模型之後，請考慮使用近距離互動抓取手勢用手將某些全像投影移得近一些，以便直接與全像投影互動。</span><span class="sxs-lookup"><span data-stu-id="eb964-208">Hologram placement: After switching to a hands interaction model, consider moving some holograms closer to directly interact with them, by using near-interaction grab gestures with your hands.</span></span> <span data-ttu-id="eb964-209">建議可移得近一些以便能直接抓取或互動的全像投影類型包括，可在抓取和檢查全像投影時融入到 HoloLens 2 視野內的小型目標功能表、控制項、按鈕和較小型的全像投影。</span><span class="sxs-lookup"><span data-stu-id="eb964-209">The types of holograms recommended to move closer to directly grab or interact are small target menus, controls, buttons, and smaller holograms that fit within the HoloLens 2 field of view when grabbing and inspecting the hologram.</span></span>
<br>
<span data-ttu-id="eb964-210">每個應用程式和情境各不相同，所以我們會持續地根據意見反應和不斷地學習來改善和發佈設計指導方針。</span><span class="sxs-lookup"><span data-stu-id="eb964-210">Every application and scenario are different, and we’ll continue to refine and post design guidance based on feedback and continued learnings.</span></span>


## <a name="additional-caveats-and-learnings-about-moving-applications-from-x86-to-arm"></a><span data-ttu-id="eb964-211">將應用程式從 x86 移至 ARM 的其他相關注意事項和學習</span><span class="sxs-lookup"><span data-stu-id="eb964-211">Additional caveats and learnings about moving applications from x86 to ARM</span></span>

- <span data-ttu-id="eb964-212">直截了當的 Unity 應用程式很簡單，因為您可以建置 ARM 應用程式套件組合，或直接部署至裝置供套件組合執行。</span><span class="sxs-lookup"><span data-stu-id="eb964-212">Straight-forward Unity applications are simple because you can build an ARM application bundle or deploy directly to the device for the bundle to run.</span></span> <span data-ttu-id="eb964-213">部分 Unity 原生外掛程式在開發上可能會有某些挑戰。</span><span class="sxs-lookup"><span data-stu-id="eb964-213">Some Unity native plugins can present certain development challenges.</span></span> <span data-ttu-id="eb964-214">因此，您必須將所有 Unity 原生外掛程式升級至 Visual Studio 2019，並針對 ARM64 進行重建。</span><span class="sxs-lookup"><span data-stu-id="eb964-214">Because of this, you must upgrade all Unity native plugins to Visual Studio 2019 and then rebuild for ARM.</span></span>

- <span data-ttu-id="eb964-215">一個應用程式使用 Unity AudioKinetic Wwise 外掛程式，而該版本的 Unity 沒有 UWP ARM 外掛程式，導致必須耗費許多心力在有問題的應用程式中重新設計音效功能，使其能夠在 ARM 上執行。</span><span class="sxs-lookup"><span data-stu-id="eb964-215">One application used the Unity AudioKinetic Wwise plugin and that version of Unity didn't have a UWP ARM plugin, which caused a considerable effort to rework sound capabilities into the application in question to run on ARM.</span></span> <span data-ttu-id="eb964-216">請確定您已在 Unity 中安裝開發計畫所需的所有必要外掛程式，且可供使用。</span><span class="sxs-lookup"><span data-stu-id="eb964-216">Ensure that all required plugins for your development plans are installed and available in Unity.</span></span>

- <span data-ttu-id="eb964-217">在某些情況下，應用程式所需的外掛程式可能沒有 UWP/ARM 外掛程式，因此無法將應用程式移植到 HoloLens 2 並執行。</span><span class="sxs-lookup"><span data-stu-id="eb964-217">In some cases, a UWP/ARM plugin might not exist for application-required plugins, which blocks the ability to port the application and run it on HoloLens 2.</span></span> <span data-ttu-id="eb964-218">請連絡您的外掛程式提供者以解決問題，並提供對 ARM 的支援。</span><span class="sxs-lookup"><span data-stu-id="eb964-218">Contact your plugin provider to resolve the issue and provide support for ARM.</span></span>

- <span data-ttu-id="eb964-219">著色器中的 minfloat (和 min16float、minint 等變化) 在 HoloLens 2 上和在 HoloLens (第一代) 上的行為可能會不一樣。</span><span class="sxs-lookup"><span data-stu-id="eb964-219">The minfloat (and variants such as min16float, minint, and so on) in shaders might behave differently on HoloLens 2 than on HoloLens (1st gen).</span></span> <span data-ttu-id="eb964-220">具體來說，這些數字會保證至少會使用指定的位元數。</span><span class="sxs-lookup"><span data-stu-id="eb964-220">Specifically, these guarantee that at least the specified number of bits will be used.</span></span> <span data-ttu-id="eb964-221">在 Intel/Nvidia GPU 上，minfloat 多半會當作 32 位元來處理。</span><span class="sxs-lookup"><span data-stu-id="eb964-221">On Intel/Nvidia GPUs, minfloats are largely treated as 32 bits.</span></span> <span data-ttu-id="eb964-222">在 ARM 上則會實際採用指定的位元數。</span><span class="sxs-lookup"><span data-stu-id="eb964-222">On ARM, the number of bits specified is actually adhered to.</span></span> <span data-ttu-id="eb964-223">這表示實際上這些數字在 HoloLens 2 上的精確度或範圍，可能會比在 HoloLens (第 1 代) 上來得少。</span><span class="sxs-lookup"><span data-stu-id="eb964-223">That means in practice, these numbers might have less precision or range on HoloLens 2 than they did on HoloLens (1st gen).</span></span>

- <span data-ttu-id="eb964-224">_asm 指令似乎無法在 ARM 上運作，這表示任何使用 _asm 指令的程式碼必須重寫。</span><span class="sxs-lookup"><span data-stu-id="eb964-224">The _asm instructions don’t appear to work on ARM, meaning any code using _asm instructions must be rewritten.</span></span>

- <span data-ttu-id="eb964-225">ARM 不支援 SIMD 指令集，因為在 ARM 上無法使用 xmmintrin.h、emmintrin.h、tmmintrin.h 和 immintrin.h 等多種標頭。</span><span class="sxs-lookup"><span data-stu-id="eb964-225">ARM doesn't support the SIMD instruction set because various headers, such as xmmintrin.h, emmintrin.h, tmmintrin.h, and immintrin.h, aren't available on ARM.</span></span>

- <span data-ttu-id="eb964-226">ARM 上的著色器編譯器會在第一次繪製呼叫期間，於著色器已載入或著色器所相依的某個項目有所變更後執行，而不是在著色器載入時執行。</span><span class="sxs-lookup"><span data-stu-id="eb964-226">The shader compiler on ARM runs during the first draw call after the shader has been loaded or something the shader relies on has changed, not at shader load time.</span></span> <span data-ttu-id="eb964-227">視需要編譯的著色器數目而定，對畫面播放速率的影響可能很明顯，且暗示在 HoloLens 2 與 HoloLens (第1代) 上處理、封裝、更新著色器的方式應該不同。</span><span class="sxs-lookup"><span data-stu-id="eb964-227">The impact on framerate can be noticeable, depending on how many shaders need to be compiled, with implications for how shaders should be handled, packaged, updated differently on HoloLens 2 vs HoloLens (1st gen).</span></span>

## <a name="see-also"></a><span data-ttu-id="eb964-228">另請參閱</span><span class="sxs-lookup"><span data-stu-id="eb964-228">See also</span></span>

* [<span data-ttu-id="eb964-229">安裝工具</span><span class="sxs-lookup"><span data-stu-id="eb964-229">Install the tools</span></span>](../install-the-tools.md)
* [<span data-ttu-id="eb964-230">MRTK-安裝指南</span><span class="sxs-lookup"><span data-stu-id="eb964-230">MRTK - Installation guide</span></span>](/windows/mixed-reality/mrtk-unity/install-the-tools)
* [<span data-ttu-id="eb964-231">MRTK-檔首頁</span><span class="sxs-lookup"><span data-stu-id="eb964-231">MRTK - Documentation home</span></span>](/windows/mixed-reality/mrtk-unity)
* [<span data-ttu-id="eb964-232">從 HoloToolkit/MRTK 移植至 MRTK 第2版</span><span class="sxs-lookup"><span data-stu-id="eb964-232">Porting from HoloToolkit/MRTK to MRTK version 2</span></span>](/windows/mixed-reality/mrtk-unity/updates-deployment/htk-to-mrtk-porting-guide)
* [<span data-ttu-id="eb964-233">Unity 的建議設定</span><span class="sxs-lookup"><span data-stu-id="eb964-233">Recommended settings for Unity</span></span>](../unity/recommended-settings-for-unity.md)
* [<span data-ttu-id="eb964-234">了解混合實境的效能</span><span class="sxs-lookup"><span data-stu-id="eb964-234">Understanding performance for Mixed Reality</span></span>](../platform-capabilities-and-apis/understanding-performance-for-mixed-reality.md)